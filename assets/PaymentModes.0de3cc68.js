import{Q as v,a as j}from"./QTr.cd6a50c5.js";import{r as d,aI as p,a5 as P,u as i,P as m,a3 as C,bb as s,b as G,d as a,ac as k,bD as x,bE as y,a6 as N,a4 as D}from"./index.54629b9a.js";import{Q as A}from"./QInput.92598606.js";import{Q as H,c as J,p as K,f as W,d as X}from"./paginations.53f48ad5.js";import{a as Y,Q as T}from"./QCard.a98f9a97.js";import{e as Z,a as ee}from"./excel.5d19a2ad.js";import{a as ae}from"./use-quasar.8acf90c1.js";import{a as te,u as le}from"./index.da8d9231.js";import{u as se}from"./payment-mode-store.7be13951.js";import"./use-dark.f6381175.js";import"./QSeparator.d04c4ca5.js";import"./rtl.5467f1aa.js";import"./module_calls.c637478d.js";import"./helpers.d60dad50.js";const $=[{name:"name",required:!0,label:"Name",align:"left",field:_=>_.name,format:_=>`${_}`,sortable:!0},{name:"user",align:"center",label:"Users",field:"user",sortable:!0},{name:"sales",align:"center",label:"sales",field:"user",sortable:!0},{name:"created_at",align:"center",label:"Created On",field:"created_at",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"created_at"}];const oe={class:"q-pa-md"},re={key:0},ne={key:1},de={class:"text-h6"},ue={class:"text-center error_msg"},Me={__name:"PaymentModes",setup(_){const V=ae(),h=te(),g=se(),Q=K(10),u=d(!1),f=d(!1),r=d(!1),w=d(""),b=d(""),o=d(""),M=d(""),c=d(""),{data:q,isLoading:B,isError:E}=le("payment_modes",()=>g.fetchPaymentModes()),S=async t=>{if(confirm(`Continue with the operation. Delete ${t.name} ?`)){const e=await g.deletePaymentMode({uuid:t.uuid});e.status==="success"?(h.refetchQueries("payment_modes"),n(e.message,"green","top")):n("There was an error","red","top-right")}},U=()=>{b.value="Add New PaymentMode",u.value=!0,f.value=!1},z=t=>{f.value=!0,b.value=`Edit ${t.name}`,o.value=t.name,M.value=t.uuid,u.value=!0},I=async()=>{if(r.value=!0,c.value="",o.value.trim()){const t=await g.createPaymentMode({name:o.value.trim()});t.status==="success"?(h.refetchQueries("payment_modes"),o.value="",u.value=!1,n(t.message,"green","top"),r.value=!1):(c.value=t.message,n(t.message,"red","top-right"),r.value=!1)}else c.value="Name is required!",n("Name is required!","red","top-right"),r.value=!1},L=async()=>{r.value=!0;const t={name:o.value.trim(),uuid:M.value};if(t.name){const l=await g.updatePaymentMode(t);l.status==="success"?(h.refetchQueries("payment_modes"),o.value="",u.value=!1,f.value=!1,b.value="",n(l.message,"green","top"),r.value=!1):(r.value=!1,n("There was an error","red","top-right"))}else c.value="Name is required!",n("Name is required!","red","top-right"),r.value=!1},F=()=>{u.value=!1,o.value="",M.value="",c.value=""},n=(t,l,e)=>{V.notify({message:t,color:l,position:e})},O=t=>{const l=t.map(e=>({name:e.name,users:e.users.length,created_at:e.created_at}));Z(l,$,ee,V,"PaymentModesData")};return(t,l)=>(p(),P("div",oe,[i(B)?(p(),P("div",re,"Loading payment_modes...")):i(E)?(p(),P("div",ne,"An error has occurred: "+m(i(E)),1)):(p(),C(H,{key:2,title:"PaymentModes",rows:i(q),columns:i($),pagination:i(Q),"onUpdate:pagination":l[2]||(l[2]=e=>G(Q)?Q.value=e:null),separator:"cell","row-key":"name",filter:w.value,dense:""},{body:s(e=>[a(j,{props:e},{default:s(()=>[a(v,{key:"name",props:e},{default:s(()=>[k(m(e.row.name),1)]),_:2},1032,["props"]),a(v,{key:"user",props:e},{default:s(()=>[k(m(e.row.user),1)]),_:2},1032,["props"]),a(v,{key:"sales",props:e},{default:s(()=>[k(m(e.row.sales),1)]),_:2},1032,["props"]),a(v,{key:"created_at",props:e},{default:s(()=>[k(m(e.row.created_at),1)]),_:2},1032,["props"]),a(v,{key:"actions",props:e},{default:s(()=>[a(x,{color:"blue",name:"edit",onClick:R=>z(e.row),style:{cursor:"pointer"},size:"20px",class:"q-mr-md"},null,8,["onClick"]),a(x,{color:"red",name:"delete",onClick:R=>S(e.row),style:{cursor:"pointer"},size:"20px"},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),"top-right":s(()=>[a(A,{borderless:"",dense:"",outlined:"",rounded:"",debounce:"300",modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=e=>w.value=e),placeholder:"Search",class:"q-mr-md"},{append:s(()=>[a(x,{name:"search"})]),_:1},8,["modelValue"]),a(y,{onClick:U,round:"",dense:"",color:"primary",size:"small",icon:"add"}),a(y,{dense:"",flat:"",color:"primary","icon-right":"archive",label:"Export",class:"q-ml-sm","no-caps":"",onClick:l[1]||(l[1]=e=>O(i(q)))})]),_:1},8,["rows","columns","pagination","filter"])),a(J,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=e=>u.value=e),persistent:""},{default:s(()=>[a(Y,{style:{width:"500px"}},{default:s(()=>[a(T,null,{default:s(()=>[N("div",de,m(b.value),1)]),_:1}),a(T,{class:"q-pt-none"},{default:s(()=>[a(A,{outlined:"",dense:"",label:"Name",modelValue:o.value,"onUpdate:modelValue":l[3]||(l[3]=e=>o.value=e)},null,8,["modelValue"])]),_:1}),N("div",ue,[N("small",null,m(c.value),1)]),a(W,{align:"right"},{default:s(()=>[a(y,{flat:"",label:"Cancel",color:"red",onClick:F}),a(X),o.value&&!f.value?(p(),C(y,{key:0,flat:"",label:"Add PaymentMode",color:"primary",onClick:I,loading:r.value},null,8,["loading"])):D("",!0),o.value&&f.value?(p(),C(y,{key:1,flat:"",label:"Edit PaymentMode",color:"primary",onClick:L,loading:r.value},null,8,["loading"])):D("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Me as default};
