import{Q as A}from"./QSpace.3ea65c84.js";import{Q as J}from"./QToolbar.430ed49e.js";import{Q}from"./QSeparator.4016704c.js";import{af as K,c1 as O,ca as Y,r as _,aR as j,aJ as r,a6 as y,a7 as e,d as s,bb as a,ad as F,Q as B,u as G,bD as c,a5 as p,a4 as C,bE as q,aM as H,aK as W}from"./index.f12d4c6e.js";import{Q as d,a as i}from"./helpers.0ee499c7.js";import{Q as I}from"./QInput.169897e0.js";import{Q as E}from"./QCardActions.07abd612.js";import{Q as X}from"./QDialog.2558a699.js";import{u as Z}from"./use-quasar.918193c4.js";import{h as ss}from"./moment.9709ab41.js";import{g as D}from"./get-css-var.23548d6a.js";import{u as es}from"./user-store.2a0a3c8c.js";import"./use-dark.7993985a.js";import"./use-key-composition.db93ebf2.js";import"./uid.9b787859.js";import"./module_calls.f56580bb.js";K({name:"Apexline",data(){return{options:{title:{text:"Logged In Users",align:"left"},chart:{id:"apex-line"},colors:[D("primary"),D("secondary"),D("negative")],markers:{size:4,hover:{sizeOffset:6}},xaxis:{categories:[1991,1992,1993,1994,1995,1996,1997,1998]}},series:[{name:"series-1",data:[30,40,45,50,49,60,70,91]}]}}});const o=w=>(H("data-v-594a1a90"),w=w(),W(),w),as={class:"q-pa-sm"},ts={class:"q-pa-sm"},ls=o(()=>e("h5",{style:{"font-weight":"800",color:"#017951"}},"App Settings",-1)),os={class:"row q-col-gutter-sm q-ml-xs q-mr-sm q-py-sm"},ns={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},is=o(()=>e("span",{class:"float-right"},"Roles",-1)),ds={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},rs=o(()=>e("span",{class:"float-right"},"Departments",-1)),cs={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},us=o(()=>e("span",{class:"float-right"},"Sales",-1)),ms={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},_s=o(()=>e("span",{class:"float-right"},"Inventories",-1)),fs={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},ps=o(()=>e("span",{class:"float-right"},"Users",-1)),gs={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},vs=o(()=>e("span",{class:"float-right"},"Payment Mode",-1)),hs={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},ks=o(()=>e("span",{class:"float-right"},"Measurements",-1)),ys={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},ws=o(()=>e("span",{class:"float-right"},"Debtors",-1)),xs={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},bs=o(()=>e("span",{class:"float-right"},"Recycle Bin and Logs",-1)),Vs={key:0,style:{"background-color":"teal",color:"white","text-align":"center"}},Qs=o(()=>e("strong",null,"Confirmation Token Sent.",-1)),Cs=[Qs],Ss={key:1,style:{"background-color":"red",color:"white","text-align":"center"}},As=o(()=>e("div",{class:"text-h6"}," Confirm and verify that you are an administrator. ",-1)),qs={key:0},Is={key:1},Ds=o(()=>e("small",null,"Copy your access token from email then paste it below.",-1)),Ms=o(()=>e("strong",{style:{color:"teal"}},"Token Expires once used",-1)),Ts={__name:"Settings",setup(w){const S=es(),L=Y(),f=Z(),x=_(!1),u=_(!1),g=_(!1),v=_(""),b=_(""),h=_(""),V=_(""),M=_(""),N=()=>{S.access_granted?U("Access granted","teal"):x.value=!0},P=async()=>{const l={email:v.value.trim(),password:b.value.trim()};if(l.email&&l.password){f.loading.show({message:"Verifying admin credentials and sending access token to "+l.email+". Please wait..."});const t=await S.confirmAdmin(l);t.status==="success"&&(M.value=`A one time access token has been sent to ${l.email}. It ends in .......${t.access_token.slice(-10)}`,k(`Administrator confirmed successfully. access token has been sent to ${l.email}`,"teal"),u.value=!0,f.loading.hide()),t.status==="error"&&T(t.message)}else f.loading.hide(),k("Email and password are required","red")},R=async()=>{g.value=!0;const l={access_token:h.value.trim()};if(l.access_token){const t=await S.verifyAccessToken(l);t.status==="success"&&U(t.message,"green"),t.status==="error"&&(T(t.message),g.value=!1)}else f.loading.hide(),k("Access token is required","red"),g.value=!1},k=(l,t)=>{f.notify({message:l,color:t,position:"top"})},T=l=>{f.loading.hide(),V.value=l,k(l,"red"),setTimeout(()=>V.value="",1e4)},U=(l,t)=>{L.push("/trash"),k(l,t),$()},z=()=>{x.value=!1,$()},$=()=>{v.value="",b.value="",h.value="",u.value=!1,f.loading.hide(),g.value=!1};return(l,t)=>{const m=j("router-link");return r(),y("div",as,[e("div",ts,[ls,e("small",null,[s(J,null,{default:a(()=>[F(" Setup/System Settings. "),s(A),e("strong",null,"SMA v0.1 \xA9 "+B(G(ss)().format("Y")),1)]),_:1})]),s(Q,{color:"primary"})]),e("div",os,[e("div",ns,[s(m,{to:"/roles",class:"module_link"},{default:a(()=>[s(d,{flat:"",class:"shadow-2 rad"},{default:a(()=>[s(i,{class:"mod"},{default:a(()=>[e("span",null,[s(c,{name:"settings"})]),is]),_:1})]),_:1})]),_:1})]),e("div",ds,[s(m,{to:"/departments",class:"module_link"},{default:a(()=>[s(d,{flat:"",class:"shadow-2 rad"},{default:a(()=>[s(i,{class:"mod"},{default:a(()=>[e("span",null,[s(c,{name:"settings"})]),rs]),_:1})]),_:1})]),_:1})]),e("div",cs,[s(m,{to:"/sales",class:"module_link"},{default:a(()=>[s(d,{flat:"",class:"shadow-2 rad"},{default:a(()=>[s(i,{class:"mod"},{default:a(()=>[e("span",null,[s(c,{name:"settings"})]),us]),_:1})]),_:1})]),_:1})]),e("div",ms,[s(m,{to:"/inventories",class:"module_link"},{default:a(()=>[s(d,{flat:"",class:"shadow-2 rad"},{default:a(()=>[s(i,{class:"mod"},{default:a(()=>[e("span",null,[s(c,{name:"settings"})]),_s]),_:1})]),_:1})]),_:1})]),e("div",fs,[s(m,{to:"/users",class:"module_link"},{default:a(()=>[s(d,{flat:"",class:"shadow-2 rad"},{default:a(()=>[s(i,{class:"mod"},{default:a(()=>[e("span",null,[s(c,{name:"settings"})]),ps]),_:1})]),_:1})]),_:1})]),e("div",gs,[s(m,{to:"/payment_modes",class:"module_link"},{default:a(()=>[s(d,{flat:"",class:"shadow-2 rad"},{default:a(()=>[s(i,{class:"mod"},{default:a(()=>[e("span",null,[s(c,{name:"settings"})]),vs]),_:1})]),_:1})]),_:1})]),e("div",hs,[s(m,{to:"/measurements",class:"module_link"},{default:a(()=>[s(d,{flat:"",class:"shadow-2 rad"},{default:a(()=>[s(i,{class:"mod"},{default:a(()=>[e("span",null,[s(c,{name:"settings"})]),ks]),_:1})]),_:1})]),_:1})]),e("div",ys,[s(m,{to:"/debtors",class:"module_link"},{default:a(()=>[s(d,{flat:"",class:"shadow-2 rad"},{default:a(()=>[s(i,{class:"mod"},{default:a(()=>[e("span",null,[s(c,{name:"settings"})]),ws]),_:1})]),_:1})]),_:1})]),e("div",xs,[s(d,{flat:"",dark:"",class:"shadow-2 rad",onClick:t[0]||(t[0]=n=>N())},{default:a(()=>[s(i,{class:"mod_trash"},{default:a(()=>[e("span",null,[s(c,{name:"delete"})]),bs]),_:1})]),_:1})])]),s(X,{modelValue:x.value,"onUpdate:modelValue":t[7]||(t[7]=n=>x.value=n),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[s(d,{style:{width:"500px"}},{default:a(()=>[u.value?(r(),y("div",Vs,Cs)):p("",!0),V.value?(r(),y("div",Ss,[e("strong",null,B(V.value),1)])):p("",!0),s(i,null,{default:a(()=>[As]),_:1}),s(Q,{color:"white"}),s(i,{class:"q-pt-sm"},{default:a(()=>[u.value?(r(),y("div",Is,[Ds,s(I,{dense:"",outlined:"",label:"Access Token",modelValue:h.value,"onUpdate:modelValue":t[3]||(t[3]=n=>h.value=n),hint:M.value},null,8,["modelValue","hint"])])):(r(),y("div",qs,[s(I,{dense:"",outlined:"",type:"email",label:"Email",modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=n=>v.value=n),hint:"Please ensure that this admin email exists and is active.",class:"q-mb-sm",clearable:""},null,8,["modelValue"]),s(I,{dense:"",outlined:"",type:"password",label:"Password",modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=n=>b.value=n),clearable:""},null,8,["modelValue"])]))]),_:1}),u.value?(r(),C(Q,{key:2,color:"teal"})):p("",!0),e("small",null,[u.value?(r(),C(E,{key:0},{default:a(()=>[s(A),Ms]),_:1})):p("",!0)]),s(Q,{color:"teal"}),s(E,{class:"bg-white text-primary"},{default:a(()=>[s(q,{flat:"",label:"Cancel",color:"red",onClick:t[4]||(t[4]=n=>z())}),s(A),!u.value&&v.value?(r(),C(q,{key:0,flat:"",label:"Confirm",onClick:t[5]||(t[5]=n=>P())})):p("",!0),u.value&&h.value?(r(),C(q,{key:1,flat:"",label:"Verify and Continue",onClick:t[6]||(t[6]=n=>R()),loading:g.value},null,8,["loading"])):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};var Hs=O(Ts,[["__scopeId","data-v-594a1a90"]]);export{Hs as default};
